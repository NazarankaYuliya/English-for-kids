(()=>{"use strict";const t=[["Action A","Action B","Animal A","Animal B","Clothes","Emotions","Food","Transport"],[{word:"Cry",translation:"Плакать",image:"img/cry.jpeg",audioSrc:"audio/cry.mp3"},{word:"Dance",translation:"Танцевать",image:"img/dance.jpeg",audioSrc:"audio/dance.mp3"},{word:"Dive",translation:"Нырять",image:"img/dive.jpeg",audioSrc:"audio/dive.mp3"},{word:"Draw",translation:"Рисовать",image:"img/draw.jpeg",audioSrc:"audio/draw.mp3"},{word:"Fish",translation:"Ловить рыбу",image:"img/fish1.jpeg",audioSrc:"audio/fish.mp3"},{word:"Fly",translation:"Летать",image:"img/fly.jpeg",audioSrc:"audio/fly.mp3"},{word:"Hug",translation:"Обнимать",image:"img/hug.jpeg",audioSrc:"audio/hug.mp3"},{word:"Jump",translation:"Прыгать",image:"img/jump.jpeg",audioSrc:"audio/jump.mp3"}],[{word:"Open",translation:"Открывать",image:"img/open.jpeg",audioSrc:"audio/open.mp3"},{word:"Play",translation:"Играть",image:"img/play.jpeg",audioSrc:"audio/play.mp3"},{word:"Point",translation:"Указывать",image:"img/point.jpeg",audioSrc:"audio/point.mp3"},{word:"Ride",translation:"Ездить",image:"img/ride.jpeg",audioSrc:"audio/ride.mp3"},{word:"Run",translation:"Бегать",image:"img/run.jpeg",audioSrc:"audio/run.mp3"},{word:"Skip",translation:"Пропускать, прыгать",image:"img/skip.jpeg",audioSrc:"audio/skip.mp3"},{word:"Sing",translation:"Петь",image:"img/sing.jpeg",audioSrc:"audio/sing.mp3"},{word:"Swim",translation:"Плавать",image:"img/swim.jpeg",audioSrc:"audio/swim.mp3"}],[{word:"Cat",translation:"Кот",image:"img/cat.jpeg",audioSrc:"audio/cat.mp3"},{word:"Chick",translation:"Цыплёнок",image:"img/chick.jpeg",audioSrc:"audio/chick.mp3"},{word:"Chicken",translation:"Курица",image:"img/chicken.jpeg",audioSrc:"audio/chicken.mp3"},{word:"Dog",translation:"Собака",image:"img/dog.jpeg",audioSrc:"audio/dog.mp3"},{word:"Horse",translation:"Лошадь",image:"img/horse.jpeg",audioSrc:"audio/horse.mp3"},{word:"Pig",translation:"Свинья",image:"img/pig.jpeg",audioSrc:"audio/pig.mp3"},{word:"Rabbit",translation:"Кролик",image:"img/rabbit.jpeg",audioSrc:"audio/rabbit.mp3"},{word:"Cow",translation:"Корова",image:"img/cow.jpeg",audioSrc:"audio/cow.mp3"}],[{word:"Bird",translation:"Птица",image:"img/bird.jpeg",audioSrc:"audio/bird.mp3"},{word:"Fish",translation:"Рыба",image:"img/fish.jpeg",audioSrc:"audio/fish.mp3"},{word:"Frog",translation:"Жаба",image:"img/frog.jpeg",audioSrc:"audio/frog.mp3"},{word:"Giraffe",translation:"Жираф",image:"img/giraffe.jpeg",audioSrc:"audio/giraffe.mp3"},{word:"Lion",translation:"Лев",image:"img/lion.jpeg",audioSrc:"audio/lion.mp3"},{word:"Mouse",translation:"Мышь",image:"img/mouse.jpeg",audioSrc:"audio/mouse.mp3"},{word:"Turtle",translation:"Черепаха",image:"img/turtle.jpeg",audioSrc:"audio/turtle.mp3"},{word:"Dolphin",translation:"Дельфин",image:"img/dolphin.jpeg",audioSrc:"audio/dolphin.mp3"}],[{word:"Skirt",translation:"Юбка",image:"img/skirt.jpeg",audioSrc:"audio/skirt.mp3"},{word:"Shirt",translation:"Рубашка",image:"img/shirt.jpeg",audioSrc:"audio/shirt.mp3"},{word:"Pants",translation:"Брюки",image:"img/pants.jpeg",audioSrc:"audio/pants.mp3"},{word:"Socks",translation:"Носки",image:"img/socks.jpeg",audioSrc:"audio/socks.mp3"},{word:"Sweatshirt",translation:"Кофта, толстовка",image:"img/sweatshirt.jpeg",audioSrc:"audio/sweatshirt.mp3"},{word:"Dress",translation:"Платье",image:"img/dress.jpeg",audioSrc:"audio/dress.mp3"},{word:"Hat",translation:"Шапка",image:"img/hat.jpeg",audioSrc:"audio/hat.mp3"},{word:"Sneakers",translation:"Кроссовки",image:"img/sneakers.jpeg",audioSrc:"audio/sneakers.mp3"}],[{word:"Sad",translation:"Грустный",image:"img/sad.jpeg",audioSrc:"audio/sad.mp3"},{word:"Happy",translation:"Счастливый",image:"img/happy.jpeg",audioSrc:"audio/happy.mp3"},{word:"Angry",translation:"Сердитый",image:"img/angry.jpeg",audioSrc:"audio/angry.mp3"},{word:"Tired",translation:"Уставший",image:"img/tired.jpeg",audioSrc:"audio/tired.mp3"},{word:"Laugh",translation:"Cмех",image:"img/laugh.jpeg",audioSrc:"audio/laugh.mp3"},{word:"Surprised",translation:"Удивлённый",image:"img/surprised.jpeg",audioSrc:"audio/surprised.mp3"},{word:"Smile",translation:"Улыбка",image:"img/smile.jpeg",audioSrc:"audio/smile.mp3"},{word:"Scared",translation:"Испуганный",image:"img/scared.jpeg",audioSrc:"audio/scared.mp3"}],[{word:"Ice cream",translation:"Мороженное",image:"img/ice-cream.jpeg",audioSrc:"audio/ice-cream.mp3"},{word:"Banana",translation:"Банан",image:"img/banana.jpeg",audioSrc:"audio/banana.mp3"},{word:"Burger",translation:"Бургер",image:"img/burger.jpeg",audioSrc:"audio/burger.mp3"},{word:"Pizza",translation:"Пицца",image:"img/pizza.jpeg",audioSrc:"audio/pizza.mp3"},{word:"Apple",translation:"Яблоко",image:"img/apple.jpeg",audioSrc:"audio/apple.mp3"},{word:"Salad",translation:"Салат",image:"img/salad.jpeg",audioSrc:"audio/salad.mp3"},{word:"Cake",translation:"Торт",image:"img/cake.jpeg",audioSrc:"audio/cake.mp3"},{word:"Cheese",translation:"Сыр",image:"img/cheese.jpeg",audioSrc:"audio/cheese.mp3"}],[{word:"Car",translation:"Машина",image:"img/car.jpeg",audioSrc:"audio/car.mp3"},{word:"Motorcycle",translation:"Мотоцикл",image:"img/motorcycle.jpeg",audioSrc:"audio/motorcycle.mp3"},{word:"Bus",translation:"Автобус",image:"img/bus.jpeg",audioSrc:"audio/bus.mp3"},{word:"Train",translation:"Поезд",image:"img/train.jpeg",audioSrc:"audio/train.mp3"},{word:"Bicycle",translation:"Велосипед",image:"img/bicycle.jpeg",audioSrc:"audio/bicycle.mp3"},{word:"Airplane",translation:"Самолет",image:"img/airplane.jpeg",audioSrc:"audio/airplane.mp3"},{word:"Boat",translation:"Лодка",image:"img/boat.jpeg",audioSrc:"audio/boat.mp3"},{word:"Helicopter",translation:"Вертолет",image:"img/helicopter.jpeg",audioSrc:"audio/helicopter.mp3"}]];class e{constructor(t,e,a,i,o){this.category=t,this.word=e,this.translation=a,this.image=i,this.audioSrc=o,this.clicks=0,this.guesses=0,this.mistakes=0,this.percentage=0}}function a(){for(let a=1;a<t.length;a++)t[a].forEach((t=>{const i=new e(N[a-1],t.word,t.translation,t.image,t.audioSrc);n[i.word]=i}))}function i(){const t=localStorage.getItem("statistics");t&&Object.assign(n,JSON.parse(t))}function o(){localStorage.setItem("statistics",JSON.stringify(n))}const n={};function r(){R.textContent="Statistics",H.innerHTML="";const t=document.createElement("div");t.classList.add("stat"),H.append(t);const e=document.createElement("div");e.classList.add("stat-buttons"),t.append(e);const a=document.createElement("button");a.classList.add("stat-repeat","btn","btn-info"),a.textContent="Repeat difficult words";const i=document.createElement("button");i.classList.add("stat-reset","btn","btn-info"),i.textContent="Reset",i.addEventListener("click",s),e.append(a),e.append(i);const o=document.createElement("table");o.classList.add("table");const n=document.createElement("div");n.classList.add("table-container"),n.append(o),t.append(n);const r=document.createElement("thead");o.append(r),r.innerHTML='\n  <tr>\n    <th scope="col" data-column="word" data-direction="asc">Word</th>\n    <th scope="col" data-column="clicks" data-direction="asc">Clicked</th>\n    <th scope="col" data-column="translation" data-direction="asc">Translation</th>\n    <th scope="col" data-column="guesses" data-direction="asc">Correct</th>\n    <th scope="col" data-column="mistakes" data-direction="asc">Wrong</th>\n    <th scope="col" data-column="percentage" data-direction="asc">%</th>\n    <th scope="col" data-column="category" data-direction="asc">Category</th>\n  </tr>',r.addEventListener("click",(t=>{const e=t.target.closest("th");e&&function(t,e){const a=document.querySelector("tbody"),i=function(t,e,a){return t.sort(((t,i)=>{const o=t.querySelector(`td[data-column="${e}"]`),n=i.querySelector(`td[data-column="${e}"]`),r=c(o),s=c(n);return r<s?"asc"===a?-1:1:r>s?"asc"===a?1:-1:0}))}(Array.from(a.querySelectorAll("tr")),t,e);!function(t,e){t.innerHTML="",e.forEach((e=>t.appendChild(e)))}(a,i);!function(t,e){t.dataset.direction="asc"===e?"desc":"asc"}(document.querySelector(`th[data-column="${t}"]`),e)}(e.dataset.column,e.dataset.direction)}));const d=document.createElement("tbody");o.append(d),function(){const t=JSON.parse(localStorage.getItem("statistics"))||{};for(const e in t){const a=t[e],i=document.createElement("tr");let o=document.createElement("td");o.dataset.column="word",o.dataset.value=a.word,o.textContent=a.word,i.append(o),o=document.createElement("td"),o.dataset.column="clicks",o.dataset.value=a.clicks,o.textContent=a.clicks,i.append(o),o=document.createElement("td"),o.dataset.column="translation",o.dataset.value=a.translation,o.textContent=a.translation,i.append(o),o=document.createElement("td"),o.dataset.column="guesses",o.dataset.value=a.guesses,o.textContent=a.guesses,i.append(o),o=document.createElement("td"),o.dataset.column="mistakes",o.dataset.value=a.mistakes,o.textContent=a.mistakes,i.append(o),o=document.createElement("td"),o.dataset.column="percentage",o.dataset.value=a.percentage,o.textContent=isNaN(100*a.guesses/(a.mistakes+a.guesses))?"0":Math.ceil(100*a.guesses/(a.mistakes+a.guesses)),i.append(o),o=document.createElement("td"),o.dataset.column="category",o.dataset.value=a.category,o.textContent=a.category,i.append(o),document.querySelector("tbody").append(i)}}()}function s(){for(const t in n)n[t].clicks=0,n[t].guesses=0,n[t].mistakes=0;a(),o(),r()}function c(t){let e=t.dataset.value||t.textContent.trim();return isNaN(e)||(e=Number(e)),e}const d=new Audio("./data/audio/error.mp3"),m=new Audio("./data/audio/correct.mp3"),l=new Audio("./data/audio/success.mp3"),u=new Audio("./data/audio/failure.mp3"),g="./data/img/";let p=0,h=0,S=0;const w=[],f=[],y=8;function j(){!function(){p=0,h=0,S=0,w.length=0,f.length=0,A.innerHTML="";Array.from(H.querySelectorAll(".card")).sort((()=>Math.random()-.5)).forEach((t=>{const e=t.querySelector("audio").src,a=t.querySelector(".front h4").textContent;w.push(e),f.push(a),t.addEventListener("click",k)})),v()}();let t=!0;t?(T.innerText="REPEAT",T.removeEventListener("click",j),T.addEventListener("click",b),t=!1):b()}function v(){new Audio(w[p]).play()}function k(t){const e=t.currentTarget,a=e.querySelector(".front h4").textContent;a===f[p]?(m.play(),e.classList.add("inactive"),e.removeEventListener("click",k),i(),n[a].guesses++,o(),p++,h++,document.createElement("span").classList.add("star-win"),E("star-win"),p<w.length?v():(0===S?(l.play(),H.innerHTML=`\n        <div class="success">\n            <img src="${g}success.jpeg">\n            <p class='game-over'>Awesome job! You guessed all the words!</p>\n        </div>`):(u.play(),H.innerHTML=`\n        <div class="failure">\n            <img src="${g}failure.jpeg">\n            <p class='game-over'> You made ${S} mistakes.</p>\n        </div>`),setTimeout((()=>{z()}),3e3))):(d.play(),S++,i(),n[a].mistakes++,o(),document.createElement("span").classList.add("star"),E("star"))}function E(t){const e=document.createElement("span");e.classList.add(t),A.children.length>=y&&A.removeChild(A.children[0]),A.append(e)}function b(){v()}let L=!1;const C=document.querySelector(".mode"),x=document.querySelector(".switch-input"),T=document.createElement("button");T.className="start-game";const A=document.createElement("div");A.className="stars";const $=document.createElement("div");$.className="game-container",$.append(A,T);class M{constructor(t,e,a,i){this.word=t,this.translation=e,this.image=`${B}${a}`,this.audioSrc=`${B}${i}`}generateHTML(t){return`\n        <div class="card" id="${t+1}">\n            <div class="front">\n                <div class="card-image">\n                    <img src="${this.image}" alt="${this.word}">\n                </div>\n                <div class="card-description">\n                    <h4>${this.word}</h4>\n                    <img class="rotate" src="${O}" alt="rotate" width="20px">\n                </div>\n            </div>\n            <div class="back">\n                <div class="card-image">\n                    <img src="${this.image}" alt="${this.word}">\n                </div>\n                <div class="card-description">\n                    <h4>${this.translation}</h4>\n                </div>\n            </div>\n            <audio class="card-audio " src="${this.audioSrc}"></audio>\n        </div>\n      `}}function q(e){H.innerHTML="",H.id=e,R.textContent=N[e-1],t[e].forEach(((t,e)=>{const a=(t=new M(t.word,t.translation,t.image,t.audioSrc)).generateHTML(e);H.insertAdjacentHTML("beforeend",a)})),L&&function(){A.innerHTML="",H.prepend($);const t=H.querySelectorAll(".card-image"),e=H.querySelectorAll(".card-description"),a=H.querySelectorAll(".rotate");t.forEach((t=>t.style.height="100%")),e.forEach((t=>t.style.display="none")),a.forEach((t=>t.style.display="none")),T.textContent="START",T.removeEventListener("click",b),T.addEventListener("click",j)}()}const H=document.querySelector(".page-content"),N=t[0],R=document.querySelector(".page-title"),B="./data/",O="./data/img/rotate.svg";class P{constructor(e,a){this.id=a+1,this.categoryName=e,this.image=`${B}${t[this.id][0].image}`}}function z(){H.innerHTML="",H.id=0,R.textContent="Main",N.forEach(((e,a)=>{e=new P(N[a],a);const i=document.createElement("div");i.className="category-card",i.id=e.id,i.insertAdjacentHTML("afterbegin",`\n        <div class='category-image'>\n            <img src='${e.image}' alt='${e.categoryName}'>\n         </div>\n         <div class='category-description'>\n            <h4>${e.categoryName}</h4>\n            <h5>${t[e.id].length} cards</h5>\n         </div>\n        `),H.append(i)}))}function D(){const t=event.target.closest(".card"),e=event.target.closest(".front"),a=e.nextElementSibling;e.style.transform="rotateY(-180deg)",a.style.transform="perspective(800px) rotateY(0deg)",t.addEventListener("mouseleave",(function(){e.style.transform="rotateY(0deg)",a.style.transform="perspective(800px) rotateY(-180deg)"}),{once:!0})}document.addEventListener("click",(function(t){if(t.target.closest(".category-card")&&q(t.target.closest(".category-card").id),t.target.closest(".front")&&!L){!function(t){const e=t.target.closest(".card").querySelector("audio").src;new Audio(e).play()}(t);const e=t.target.closest(".front").querySelector("h4").textContent;i(),n[e].clicks++,o()}t.target.closest(".rotate")&&D(),t.target.closest(".header-title")&&z(),t.target.closest(".switch-input")&&(L=x.checked,C.textContent=L?"Play":"Train",H.id>0&&q(H.id)),t.target.closest(".stat-repeat")&&function(){const t=Object.entries(n).sort(((t,e)=>e[1].mistakes-t[1].mistakes)).slice(0,8).filter((t=>{let[e,a]=t;return a.mistakes>=1}));if(t.length>0){const e=t.map((t=>{let[e,a]=t;return new M(a.word,a.translation,a.image,a.audioSrc).generateHTML()})).join("");H.innerHTML=e,R.textContent="Repeat"}else H.innerHTML="<p>No words to repeat.</p>",R.textContent="Repeat"}()}));const Y=document.querySelector(".menu"),F=document.querySelector(".menu-list"),I=document.querySelector(".burger-icon");function J(){Y.classList.toggle("menu-active"),I.classList.toggle("burger-icon-rotate"),document.body.classList.toggle("stop-scrolling")}z(),function(){I.src="./data/img/burger-icon.png";const t=document.createElement("li");t.textContent="Main page",t.classList.add("menu_item_main","menu-item"),F.append(t),N.forEach((t=>{const e=document.createElement("li");e.className="menu-item",e.textContent=t,F.append(e)}));const e=document.createElement("li");e.textContent="Statistics",e.classList.add("menu_item_stat","menu-item"),F.append(e),F.addEventListener("click",(t=>{const e=t.target.closest("li");switch(e.textContent){case"Main page":z(),J();break;case"Statistics":r(),J();break;default:q(N.indexOf(e.textContent)+1),J()}})),document.addEventListener("click",(t=>{(t.target.closest(".burger-icon")||!t.target.closest(".menu")&&Y.classList.contains("menu-active"))&&J()}))}(),a(),i(),o()})();