(()=>{"use strict";const t=[["Action A","Action B","Animal A","Animal B","Clothes","Emotions","Food","Transport"],[{word:"Cry",translation:"Плакать",image:"img/cry.jpeg",audioSrc:"audio/cry.mp3"},{word:"Dance",translation:"Танцевать",image:"img/dance.jpeg",audioSrc:"audio/dance.mp3"},{word:"Dive",translation:"Нырять",image:"img/dive.jpeg",audioSrc:"audio/dive.mp3"},{word:"Draw",translation:"Рисовать",image:"img/draw.jpeg",audioSrc:"audio/draw.mp3"},{word:"Fish",translation:"Ловить рыбу",image:"img/fish1.jpeg",audioSrc:"audio/fish.mp3"},{word:"Fly",translation:"Летать",image:"img/fly.jpeg",audioSrc:"audio/fly.mp3"},{word:"Hug",translation:"Обнимать",image:"img/hug.jpeg",audioSrc:"audio/hug.mp3"},{word:"Jump",translation:"Прыгать",image:"img/jump.jpeg",audioSrc:"audio/jump.mp3"}],[{word:"Open",translation:"Открывать",image:"img/open.jpeg",audioSrc:"audio/open.mp3"},{word:"Play",translation:"Играть",image:"img/play.jpeg",audioSrc:"audio/play.mp3"},{word:"Point",translation:"Указывать",image:"img/point.jpeg",audioSrc:"audio/point.mp3"},{word:"Ride",translation:"Ездить",image:"img/ride.jpeg",audioSrc:"audio/ride.mp3"},{word:"Run",translation:"Бегать",image:"img/run.jpeg",audioSrc:"audio/run.mp3"},{word:"Skip",translation:"Пропускать, прыгать",image:"img/skip.jpeg",audioSrc:"audio/skip.mp3"},{word:"Sing",translation:"Петь",image:"img/sing.jpeg",audioSrc:"audio/sing.mp3"},{word:"Swim",translation:"Плавать",image:"img/swim.jpeg",audioSrc:"audio/swim.mp3"}],[{word:"Cat",translation:"Кот",image:"img/cat.jpeg",audioSrc:"audio/cat.mp3"},{word:"Chick",translation:"Цыплёнок",image:"img/chick.jpeg",audioSrc:"audio/chick.mp3"},{word:"Chicken",translation:"Курица",image:"img/chicken.jpeg",audioSrc:"audio/chicken.mp3"},{word:"Dog",translation:"Собака",image:"img/dog.jpeg",audioSrc:"audio/dog.mp3"},{word:"Horse",translation:"Лошадь",image:"img/horse.jpeg",audioSrc:"audio/horse.mp3"},{word:"Pig",translation:"Свинья",image:"img/pig.jpeg",audioSrc:"audio/pig.mp3"},{word:"Rabbit",translation:"Кролик",image:"img/rabbit.jpeg",audioSrc:"audio/rabbit.mp3"},{word:"Cow",translation:"Корова",image:"img/cow.jpeg",audioSrc:"audio/cow.mp3"}],[{word:"Bird",translation:"Птица",image:"img/bird.jpeg",audioSrc:"audio/bird.mp3"},{word:"Fish",translation:"Рыба",image:"img/fish.jpeg",audioSrc:"audio/fish.mp3"},{word:"Frog",translation:"Жаба",image:"img/frog.jpeg",audioSrc:"audio/frog.mp3"},{word:"Giraffe",translation:"Жираф",image:"img/giraffe.jpeg",audioSrc:"audio/giraffe.mp3"},{word:"Lion",translation:"Лев",image:"img/lion.jpeg",audioSrc:"audio/lion.mp3"},{word:"Mouse",translation:"Мышь",image:"img/mouse.jpeg",audioSrc:"audio/mouse.mp3"},{word:"Turtle",translation:"Черепаха",image:"img/turtle.jpeg",audioSrc:"audio/turtle.mp3"},{word:"Dolphin",translation:"Дельфин",image:"img/dolphin.jpeg",audioSrc:"audio/dolphin.mp3"}],[{word:"Skirt",translation:"Юбка",image:"img/skirt.jpeg",audioSrc:"audio/skirt.mp3"},{word:"Shirt",translation:"Рубашка",image:"img/shirt.jpeg",audioSrc:"audio/shirt.mp3"},{word:"Pants",translation:"Брюки",image:"img/pants.jpeg",audioSrc:"audio/pants.mp3"},{word:"Socks",translation:"Носки",image:"img/socks.jpeg",audioSrc:"audio/socks.mp3"},{word:"Sweatshirt",translation:"Кофта, толстовка",image:"img/sweatshirt.jpeg",audioSrc:"audio/sweatshirt.mp3"},{word:"Dress",translation:"Платье",image:"img/dress.jpeg",audioSrc:"audio/dress.mp3"},{word:"Hat",translation:"Шапка",image:"img/hat.jpeg",audioSrc:"audio/hat.mp3"},{word:"Sneakers",translation:"Кроссовки",image:"img/sneakers.jpeg",audioSrc:"audio/sneakers.mp3"}],[{word:"Sad",translation:"Грустный",image:"img/sad.jpeg",audioSrc:"audio/sad.mp3"},{word:"Happy",translation:"Счастливый",image:"img/happy.jpeg",audioSrc:"audio/happy.mp3"},{word:"Angry",translation:"Сердитый",image:"img/angry.jpeg",audioSrc:"audio/angry.mp3"},{word:"Tired",translation:"Уставший",image:"img/tired.jpeg",audioSrc:"audio/tired.mp3"},{word:"Laugh",translation:"Смех",image:"img/laugh.jpeg",audioSrc:"audio/laugh.mp3"},{word:"Surprised",translation:"Удивлённый",image:"img/surprised.jpeg",audioSrc:"audio/surprised.mp3"},{word:"Smile",translation:"Улыбка",image:"img/smile.jpeg",audioSrc:"audio/smile.mp3"},{word:"Scared",translation:"Испуганный",image:"img/scared.jpeg",audioSrc:"audio/scared.mp3"}],[{word:"Ice cream",translation:"Мороженное",image:"img/ice-cream.jpeg",audioSrc:"audio/ice-cream.mp3"},{word:"Banana",translation:"Банан",image:"img/banana.jpeg",audioSrc:"audio/banana.mp3"},{word:"Burger",translation:"Бургер",image:"img/burger.jpeg",audioSrc:"audio/burger.mp3"},{word:"Pizza",translation:"Пицца",image:"img/pizza.jpeg",audioSrc:"audio/pizza.mp3"},{word:"Apple",translation:"Яблоко",image:"img/apple.jpeg",audioSrc:"audio/apple.mp3"},{word:"Salad",translation:"Салат",image:"img/salad.jpeg",audioSrc:"audio/salad.mp3"},{word:"Cake",translation:"Торт",image:"img/cake.jpeg",audioSrc:"audio/cake.mp3"},{word:"Cheese",translation:"Сыр",image:"img/cheese.jpeg",audioSrc:"audio/cheese.mp3"}],[{word:"Car",translation:"Машина",image:"img/car.jpeg",audioSrc:"audio/car.mp3"},{word:"Motorcycle",translation:"Мотоцикл",image:"img/motorcycle.jpeg",audioSrc:"audio/motorcycle.mp3"},{word:"Bus",translation:"Автобус",image:"img/bus.jpeg",audioSrc:"audio/bus.mp3"},{word:"Train",translation:"Поезд",image:"img/train.jpeg",audioSrc:"audio/train.mp3"},{word:"Bicycle",translation:"Велосипед",image:"img/bicycle.jpeg",audioSrc:"audio/bicycle.mp3"},{word:"Airplane",translation:"Самолет",image:"img/airplane.jpeg",audioSrc:"audio/airplane.mp3"},{word:"Boat",translation:"Лодка",image:"img/boat.jpeg",audioSrc:"audio/boat.mp3"},{word:"Helicopter",translation:"Вертолет",image:"img/helicopter.jpeg",audioSrc:"audio/helicopter.mp3"}]];class e{constructor(t){let{categoryName:e,id:a,word:i,translation:o,image:n,audioSrc:s}=t;this.categoryName=e??null,this.id=a+1??null,this.word=i??null,this.translation=o??null,this.image=`./data/${n}`??0,this.audioSrc=`./data/${s}`??0}generateCardHTML(t){return`\n        <div class="card" id="${t+1}">\n            <div class="front">\n                <div class="card-image">\n                    <img src="${this.image}" alt="${this.word}">\n                </div>\n                <div class="card-description">\n                    <h4>${this.word}</h4>\n                    <img class="rotate" src="./data/img/rotate.svg" alt="rotate" width="20px">\n                </div>\n            </div>\n            <div class="back">\n                <div class="card-image">\n                    <img src="${this.image}" alt="${this.word}">\n                </div>\n                <div class="card-description">\n                    <h4>${this.translation}</h4>\n                </div>\n            </div>\n            <audio class="card-audio " src="${this.audioSrc}"></audio>\n        </div>\n      `}generateCategoryHTML(){return`\n        <div class='category-image'>\n            <img src='./data/${t[this.id][0].image}'  alt='${this.categoryName}' >\n         </div>\n         <div class='category-description'>\n            <h4>${this.categoryName}</h4>\n            <h5>${t[this.id].length} cards</h5>\n         </div>\n        `}}const a={};function i(t,e){localStorage.setItem(t,JSON.stringify(e))}function o(t,e){const a=localStorage.getItem(t);a&&Object.assign(e,JSON.parse(a))}const n=new Audio("./data/audio/error.mp3"),s=new Audio("./data/audio/correct.mp3"),r=new Audio("./data/audio/success.mp3"),c=new Audio("./data/audio/failure.mp3"),d="./data/img/",m="statistics";let u=0,g=0;const l=[],p=[],S=document.querySelector(".page-content");function h(){new Audio(l[u]).play()}function w(){h()}function y(){u=0,g=0,l.length=0,p.length=0,document.querySelector(".stars").innerHTML="",Array.from(S.querySelectorAll(".card")).sort((()=>Math.random()-.5)).forEach((t=>{const e=t.querySelector("audio").src,a=t.querySelector(".front h4").textContent;l.push(e),p.push(a),t.addEventListener("click",j)})),h();let t=!0;const e=document.querySelector(".start-game");t?(e.innerText="REPEAT",e.removeEventListener("click",y),e.addEventListener("click",w),t=!1):w()}function f(t){const e=document.querySelector(".stars"),a=document.createElement("span");a.classList.add(t),e.children.length>=8&&e.removeChild(e.children[0]),e.append(a)}function j(t){const e=t.currentTarget,w=e.querySelector(".front h4").textContent;!function(t,e,p){p?(s.play(),t.classList.add("inactive"),t.removeEventListener("click",j),o(m,a),a[e].guesses+=1,u+=1,f("star-win"),u<l.length?h():function(){let t,e;0===g?(r.play(),t=`${d}success.jpeg`,e="Awesome job! You guessed all the words!"):(c.play(),t=`${d}failure.jpeg`,e=`You made ${g} mistakes.`);const a=`\n    <div class="${0===g?"success":"failure"}">\n      <img src="${t}">\n      <p class='game-over'>${e}</p>\n    </div>\n  `;S.innerHTML=a,setTimeout((()=>{x()}),3e3)}()):(n.play(),g+=1,o(m,a),a[e].mistakes+=1,f("star")),i(m,a)}(e,w,w===p[u])}const v=document.querySelector(".mode");const k=document.querySelector(".page-content"),L=t[0],b=document.querySelector(".page-title"),E=document.querySelector(".switch-input");let C;function x(){k.innerHTML="",k.id=0,b.textContent="Main",L.forEach(((t,a)=>{t=new e({categoryName:t,id:a});const i=document.createElement("div");i.className="category-card",i.id=t.id,i.insertAdjacentHTML("beforeend",t.generateCategoryHTML()),k.append(i)}))}function T(a){k.innerHTML="",k.id=a,b.textContent=L[a-1],t[a].forEach(((t,a)=>{t=new e({...t}),k.insertAdjacentHTML("beforeend",t.generateCardHTML(a))})),C&&function(t){!function(t){const e=document.createElement("button");e.className="start-game",e.innerText="START";const a=document.createElement("div");a.className="stars",a.innerHTML="";const i=document.createElement("div");i.className="game-container",i.append(a,e),e.textContent="START",e.removeEventListener("click",w),e.addEventListener("click",y),t.prepend(i)}(t);const e=t.querySelectorAll(".card-image"),a=t.querySelectorAll(".card-description"),i=t.querySelectorAll(".rotate");e.forEach((t=>{t.style.height="100%"})),a.forEach((t=>{t.style.display="none"})),i.forEach((t=>{t.style.display="none"}))}(k)}document.addEventListener("click",(t=>{if(t.target.closest(".category-card")&&T(t.target.closest(".category-card").id),t.target.closest(".front")&&!C){!function(t){const e=t.target.closest(".card").querySelector("audio").src;new Audio(e).play()}(t);const e=t.target.closest(".front").querySelector("h4").textContent;o("statistics",a),a[e].clicks+=1,i("statistics",a)}t.target.closest(".rotate")&&function(t){const e=t.target.closest(".card"),a=t.target.closest(".front"),i=a.nextElementSibling;a.style.transform="rotateY(-180deg)",i.style.transform="perspective(800px) rotateY(0deg)",e.addEventListener("mouseleave",(()=>{a.style.transform="rotateY(0deg)",i.style.transform="perspective(800px) rotateY(-180deg)"}),{once:!0})}(t),t.target.closest(".switch-input")&&(C=E.checked,function(t){v.textContent=t?"Play":"Train"}(C),k.id>0&&T(k.id))}));class q{constructor(t,e){let{word:a,translation:i,image:o,audioSrc:n}=e;this.category=t,this.word=a,this.translation=i,this.image=o,this.audioSrc=n,this.clicks=0,this.guesses=0,this.mistakes=0,this.percentage=0}}function A(){const e=t[0];for(let i=1;i<t.length;i+=1)t[i].forEach((t=>{const o=new q(e[i-1],{...t});a[o.word]=o}))}const M=document.querySelector(".page-content"),$=document.querySelector(".page-title");function H(t,e){const a=document.createElement("div");return a.classList.add("stats-item",e),a.textContent=t||"0",a}function N(){$.textContent="Statistics",M.innerHTML="",function(){const t=document.createElement("div");t.classList.add("stats");const e=function(){const t=document.createElement("div");t.classList.add("stats-buttons");const e=document.createElement("button");e.classList.add("stats-repeat","btn"),e.textContent="Repeat difficult words";const a=document.createElement("button");return a.classList.add("stats-reset","btn"),a.textContent="Reset",t.append(e,a),t}(),a=function(){const t=document.createElement("div");t.classList.add("stats-container");const e=document.createElement("div");e.classList.add("stats-header");const a=document.createElement("div");a.classList.add("stats-row"),a.innerHTML='\n    <div class="stats-item stats-item-word">En <span class="sort-indicator">&#x25B2</span></div>\n    <div class="stats-item stats-item-clicks">Clicks </div>\n    <div class="stats-item stats-item-translation">Ru</div>\n    <div class="stats-item stats-item-guesses">Right</div>\n    <div class="stats-item stats-item-mistakes">Wrong </div>\n    <div class="stats-item stats-item-percentage">%</div>\n    <div class="stats-item stats-item-category">Group</div>\n  ';const i=document.createElement("div");return i.classList.add("stats-body"),e.append(a),t.append(e,i),t}();t.append(e,a),M.append(t)}(),function(){const t=JSON.parse(localStorage.getItem("statistics"))||{},e=document.querySelector(".stats-body"),a=new DocumentFragment;Object.entries(t).forEach((t=>{let[e,i]=t;const o=document.createElement("div");o.className="stats-row",o.append(H(e,"stats-item-word"),H(i.clicks??0,"stats-item-clicks"),H(i.translation,"stats-item-translation"),H(i.guesses??0,"stats-item-guesses"),H(i.mistakes??0,"stats-item-mistakes"),H((i.guesses??0)+(i.mistakes??0)>0?`${Math.round(i.guesses/(i.guesses+i.mistakes)*100)}`:"0","stats-item-percentage"),H(i.category,"stats-item-category")),a.append(o)})),e.append(a)}(),function(){document.querySelector(".stats-buttons").addEventListener("click",(t=>{const o=t.target.closest(".stats-repeat"),n=t.target.closest(".stats-reset");o&&function(){const t=Object.entries(a).sort(((t,e)=>e[1].mistakes-t[1].mistakes)).slice(0,8).filter((t=>{let[,e]=t;return e.mistakes>=1})),i=t.length?t.map((t=>{let[,a]=t;return new e({...a}).generateCardHTML()})).join(""):"<p>No words to repeat.</p>";M.innerHTML=i,$.textContent="Repeat"}(),n&&(Object.keys(a).forEach((t=>{a[t].clicks=0,a[t].guesses=0,a[t].mistakes=0})),A(),i("statistics",a),N())}));const t=document.querySelector(".stats-header");t.addEventListener("click",(e=>{const a=e.target.closest(".stats-item");if(!a)return;const i=a.classList[1].replace("stats-item-",""),o=a.classList.contains("asc");!function(t,e){const a=document.querySelector(".stats-body"),i=Array.from(a.children),o="word"===t||"translation"===t||"category"===t?"text":"number";i.sort(((a,i)=>{const n=a.querySelector(`.stats-item-${t}`).textContent,s=i.querySelector(`.stats-item-${t}`).textContent;let r=0;return"text"===o?r=n.localeCompare(s):"number"===o&&(r=Number(n)-Number(s)),e?r:-r})),a.innerHTML="",i.forEach((t=>a.appendChild(t)))}(i,!o);const n=t.querySelector(".sort-indicator");n&&n.remove(),a.classList.toggle("asc"),a.insertAdjacentHTML("beforeend",`\n      <span class="sort-indicator">\n        ${o?"&#x25B2;":"&#x25BC;"}\n      </span>\n    `)}))}()}const B=document.querySelector(".menu"),R=document.querySelector(".menu-list"),O=document.querySelector(".burger-icon"),D=t[0];function P(){B.classList.toggle("menu-active"),O.classList.toggle("burger-icon-rotate")}x(),function(){O.src="./data/img/burger-icon.png";const t=function(){const t=document.createElement("li");return t.textContent="Main page",t.classList.add("menu_item_main","menu-item"),t}();R.append(t),D.forEach((t=>{const e=function(t){const e=document.createElement("li");return e.className="menu-item",e.textContent=t,e}(t);R.append(e)}));const e=function(){const t=document.createElement("li");return t.textContent="Statistics",t.classList.add("menu_item_stat","menu-item"),t}();R.append(e),R.addEventListener("click",(t=>{const e=t.target.closest("li");let a;switch(e.textContent){case"Main page":x(),P();break;case"Statistics":N(),P();break;default:a=D.indexOf(e.textContent)+1,T(a),P()}})),document.addEventListener("click",(t=>{(t.target.closest(".burger-icon")||!t.target.closest(".menu")&&B.classList.contains("menu-active"))&&P()}))}(),A(),o("statistics",a),i("statistics",a)})();